{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet"
          href="{% static 'stylesheets/restaurant_portal/show_reservations/show_reservations_desktop.css' %}">
</head>
<body>
<h2 class="reservation-header">{% trans 'current_reservations' %}</h2>
<div class="reservation-container">
    <div class="reservation-list">
        {% for date in dates %}
            <div class="reservation-date"> {{ date|date:"j F Y" }}</div>
            {% for reservation in reservations %}
                {% if reservation.reservation_date == date %}
                    <div class="reservation-div">
                        <div class="reservation-info">
                            <p>{% trans 'reservation_time' %}: {{ reservation.arrival_time }}</p>
                            <p>{% trans 'no_persons' %}: {{ reservation.number_of_persons }}</p>
                            <p>{% trans 'comments' %}: {{ reservation.comments }}</p>
                        </div>
                        <button class="toggle-customer-info-button">{% trans 'show_customer_info' %}</button>
                        <a class="cancel-booking-button" href="{% url 'bookingsystem:delete_reservation' %}?reservationID={{ reservation.id }}&path=show_reservations">{% trans 'cancel_booking' %}</a>

                        <div class="customer-info">
                            <p>{% trans 'customer_name' %}: {{ reservation.customer.full_name }}</p>
                            <p>{% trans 'email' %}: {{ reservation.customer.email }}</p>
                            <p>{% trans 'telephone_nr' %}: {{ reservation.customer.telephone_nr }}</p>
                        </div>

                    </div>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>


</div>

<script>

    // Get all toggle buttons and content elements
    const toggleButtons = document.querySelectorAll('.toggle-customer-info-button');
    const contentDivs = document.querySelectorAll('.customer-info');

    contentDivs.forEach(content => {
        content.style.display = 'none';
    });
    // Add event listeners to each toggle button
    toggleButtons.forEach((button, index) => {
        button.addEventListener('click', () => {
            if (contentDivs[index].style.display === 'none') {
                contentDivs[index].style.display = 'block';
                toggleButtons[index].classList.add('active')
                toggleButtons[index].innerHTML = "{% trans 'hide_customer_info' %}";
            } else {
                contentDivs[index].style.display = 'none';
                toggleButtons[index].classList.remove('active')
            }
        });
    });

</script>
</body>
</html>